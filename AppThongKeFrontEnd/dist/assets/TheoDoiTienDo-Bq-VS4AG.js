import{_ as G,r as T,c as Q,i as R,j as y,a as u,b as n,w as p,v as g,F as b,g as f,e as z,d as h,t as o,f as J,o as m}from"./index-DO-IbZNU.js";const O={class:"container-fluid"},W={class:"row"},Y={class:"ms-sm-auto px-4 pt-4"},Z={class:"card p-3 mb-4 shadow-sm"},nn={class:"d-flex justify-content-between align-items-center mb-3 flex-wrap"},an={class:"d-flex flex-wrap gap-2 align-items-center"},tn={class:"col-auto"},ln={class:"col-auto"},en={class:"col-auto"},on=["value"],sn={class:"col-auto"},un=["disabled"],hn=["value"],mn={class:"col-auto"},rn={class:"row gx-3 gy-2"},dn={class:"col-md-3 col-sm-6"},cn={class:"p-2 border rounded bg-light"},vn={class:"col-md-3 col-sm-6"},Tn={class:"p-2 border rounded bg-light"},pn={class:"col-md-3 col-sm-6"},gn={class:"p-2 border rounded bg-light"},yn={class:"col-md-3 col-sm-6"},bn={class:"p-2 border rounded bg-light"},fn={class:"table-responsive"},Hn={class:"table table-bordered table-hover caption-top"},Dn={key:0},Cn={class:"text-center"},xn={__name:"TheoDoiTienDo",setup(kn){const H=T([]),t=T({kyDieuTra:"4",nam:"2025",maTinh:"87",maHuyen:"",searchTerm:""}),D=T([{ma:"87",ten:"Đồng Tháp"},{ma:"88",ten:"Long An"},{ma:"89",ten:"An Giang"},{ma:"92",ten:"Cần Thơ"}]),r=T([]),i=T({soDoanhNghiepHTX:0,phieu1:0,phieu4:0,soHoanThanhDieuTra:0}),d=Q(()=>{const e=t.value.searchTerm.toLowerCase();return H.value.filter(a=>(t.value.kyDieuTra===""||a.kyDieuTra==t.value.kyDieuTra)&&(t.value.nam===""||a.nam==t.value.nam)&&(t.value.maTinh===""||a.maTinh===t.value.maTinh)&&(t.value.maHuyen===""||a.maHuyen===t.value.maHuyen)&&(e===""||a.maSoThue.toLowerCase().includes(e)||a.tenDonVi.toLowerCase().includes(e)))}),C=(e,a=100)=>new Promise(l=>setTimeout(()=>l(e),a));async function x(){if(t.value.maHuyen="",r.value=[],t.value.maTinh){const e=[{ma:"870",ten:"Hồng Ngự",ma_tinh:"87"},{ma:"871",ten:"Tam Nông",ma_tinh:"87"},{ma:"872",ten:"Tháp Mười",ma_tinh:"87"},{ma:"880",ten:"TP Tân An",ma_tinh:"88"}];r.value=await C(e.filter(a=>a.ma_tinh===t.value.maTinh)),r.value.length>0&&(t.value.maHuyen=r.value[0].ma)}await v()}async function v(){await M(),k()}async function M(){console.log("Đang tạo dữ liệu mẫu cho doanh nghiệp/HTX với bộ lọc hiện tại:",t.value);const e=[],a=25,l=D.value.find(s=>s.ma===t.value.maTinh),c=r.value.find(s=>s.ma===t.value.maHuyen),E=l?l.ma:"87",w=c?c.ma:"870",U=c?c.ten:"Hồng Ngự",_=["Long Khánh A","Thường Phước 1","Thường Thới Hậu A","Phú Thuận B","Long Thuận"],X=["Doanh nghiệp tư nhân","Hợp tác xã","Công ty TNHH"],N=["Chăn nuôi heo","Chăn nuôi gà","Chăn nuôi tổng hợp","Chăn nuôi thủy sản"],V=["Công ty A","HTX Xanh","Doanh nghiệp Phát triển","HTX Thủy Sản","Công ty Chăn Nuôi B"];for(let s=0;s<a;s++){const $=`${w}${String(Math.floor(Math.random()*1e3)+29e3).substring(1,4)}`,B=_[s%_.length],F=`MST${Math.floor(1e9+Math.random()*9e9)}`,K=`${V[s%V.length]} ${s+1}`,j=X[s%X.length],q=N[s%N.length],I=Math.random()>.3;e.push({id:`ent-${crypto.randomUUID()}`,kyDieuTra:t.value.kyDieuTra,nam:t.value.nam,maTinh:E,maHuyen:w,tenHuyen:U,maXa:$,tenXa:B,maSoThue:F,tenDonVi:K,loaiHinh:j,linhVucChanNuoi:q,hoanThanhDieuTra:I})}H.value=await C(e.filter(s=>(t.value.kyDieuTra===""||s.kyDieuTra==t.value.kyDieuTra)&&(t.value.nam===""||s.nam==t.value.nam)&&(t.value.maTinh===""||s.maTinh===t.value.maTinh)&&(t.value.maHuyen===""||s.maHuyen===t.value.maHuyen)))}function k(){i.value.soDoanhNghiepHTX=d.value.length,i.value.phieu1=d.value.length,i.value.phieu4=d.value.filter(e=>e.linhVucChanNuoi.includes("chăn nuôi")).length,i.value.soHoanThanhDieuTra=d.value.filter(e=>e.hoanThanhDieuTra).length}function S(){console.log("Nút 'Tìm' được nhấn. Đang áp dụng bộ lọc và tái tạo dữ liệu."),v()}function L(){alert('Chức năng "Thống kê" (cần mở báo cáo/biểu đồ)')}function A(){alert('Chức năng "Xuất Excel" (cần implement logic)')}function P(){alert('Chức năng "Hủy hoàn thành điều tra" (cần xác nhận và xử lý)')}return R(async()=>{await x()}),y(()=>t.value.kyDieuTra,(e,a)=>{e!==a&&v()}),y(()=>t.value.nam,(e,a)=>{e!==a&&v()}),y(()=>t.value.searchTerm,()=>{k()}),(e,a)=>(m(),u("div",O,[n("div",W,[n("main",Y,[a[24]||(a[24]=n("h2",{class:"text-center mb-4"},"Theo dõi tiến độ điều tra của doanh nghiệp, HTX",-1)),n("div",Z,[n("div",nn,[n("div",an,[n("div",tn,[a[6]||(a[6]=n("label",{for:"kyDieuTra",class:"form-label visually-hidden"},"Kỳ điều tra",-1)),p(n("select",{"onUpdate:modelValue":a[0]||(a[0]=l=>t.value.kyDieuTra=l),class:"form-select",id:"kyDieuTra"},a[5]||(a[5]=[n("option",{value:""},"--Chọn Kỳ--",-1),n("option",null,"4",-1),n("option",null,"3",-1),n("option",null,"2",-1)]),512),[[g,t.value.kyDieuTra]])]),n("div",ln,[a[8]||(a[8]=n("label",{for:"nam",class:"form-label visually-hidden"},"Năm",-1)),p(n("select",{"onUpdate:modelValue":a[1]||(a[1]=l=>t.value.nam=l),class:"form-select",id:"nam"},a[7]||(a[7]=[n("option",{value:""},"--Chọn Năm--",-1),n("option",null,"2025",-1),n("option",null,"2024",-1),n("option",null,"2023",-1)]),512),[[g,t.value.nam]])]),n("div",en,[a[10]||(a[10]=n("label",{for:"tinhTp",class:"form-label visually-hidden"},"Tỉnh/TP",-1)),p(n("select",{"onUpdate:modelValue":a[2]||(a[2]=l=>t.value.maTinh=l),class:"form-select",id:"tinhTp",onChange:x},[a[9]||(a[9]=n("option",{value:""},"--Chọn Tỉnh--",-1)),(m(!0),u(b,null,f(D.value,l=>(m(),u("option",{key:l.ma,value:l.ma},o(l.ma)+" - "+o(l.ten),9,on))),128))],544),[[g,t.value.maTinh]])]),n("div",sn,[a[12]||(a[12]=n("label",{for:"quanHuyen",class:"form-label visually-hidden"},"Quận/Huyện",-1)),p(n("select",{"onUpdate:modelValue":a[3]||(a[3]=l=>t.value.maHuyen=l),class:"form-select",id:"quanHuyen",onChange:v,disabled:!r.value.length},[a[11]||(a[11]=n("option",{value:""},"--Chọn Huyện--",-1)),(m(!0),u(b,null,f(r.value,l=>(m(),u("option",{key:l.ma,value:l.ma},o(l.ma)+" - "+o(l.ten),9,hn))),128))],40,un),[[g,t.value.maHuyen]])]),n("div",mn,[a[13]||(a[13]=n("label",{for:"searchTerm",class:"form-label visually-hidden"},"Tìm kiếm",-1)),p(n("input",{type:"text","onUpdate:modelValue":a[4]||(a[4]=l=>t.value.searchTerm=l),class:"form-control",id:"searchTerm",placeholder:"Mã số thuế / Tên đơn vị"},null,512),[[z,t.value.searchTerm]])]),n("button",{class:"btn btn-primary",onClick:S},a[14]||(a[14]=[n("i",{class:"bi bi-search"},null,-1),h(" Tìm ")])),n("button",{class:"btn btn-secondary",onClick:L},a[15]||(a[15]=[n("i",{class:"bi bi-graph-up"},null,-1),h(" Thống kê ")])),n("button",{class:"btn btn-success",onClick:A},a[16]||(a[16]=[n("i",{class:"bi bi-file-earmark-excel"},null,-1),h(" Xuất Excel ")]))]),n("button",{class:"btn btn-warning text-dark mt-2 mt-md-0",onClick:P},a[17]||(a[17]=[n("i",{class:"bi bi-x-circle"},null,-1),h(" Hủy hoàn thành điều tra ")]))]),n("div",rn,[n("div",dn,[n("div",cn,[a[18]||(a[18]=n("strong",null,"Số Doanh nghiệp, HTX:",-1)),h(" "+o(i.value.soDoanhNghiepHTX),1)])]),n("div",vn,[n("div",Tn,[a[19]||(a[19]=n("strong",null,"Phiếu 1:",-1)),h(" "+o(i.value.phieu1),1)])]),n("div",pn,[n("div",gn,[a[20]||(a[20]=n("strong",null,"Phiếu 4:",-1)),h(" "+o(i.value.phieu4),1)])]),n("div",yn,[n("div",bn,[a[21]||(a[21]=n("strong",null,"Số hoàn thành điều tra:",-1)),h(" "+o(i.value.soHoanThanhDieuTra),1)])])])]),n("div",fn,[n("table",Hn,[n("caption",null,"Tổng số bản ghi: "+o(d.value.length),1),a[23]||(a[23]=n("thead",{class:"table-primary"},[n("tr",null,[n("th",{scope:"col"},"STT"),n("th",{scope:"col"},"Mã Huyện"),n("th",{scope:"col"},"Mã Xã"),n("th",{scope:"col",style:{"min-width":"150px"}},"Tên xã"),n("th",{scope:"col",style:{"min-width":"150px"}},"Mã số thuế"),n("th",{scope:"col",style:{"min-width":"250px"}},"Tên đơn vị"),n("th",{scope:"col",style:{"min-width":"120px"}},"Loại hình"),n("th",{scope:"col",style:{"min-width":"150px"}},"Lĩnh vực chăn nuôi"),n("th",{scope:"col",style:{"min-width":"150px"}},"Hoàn thành điều tra")])],-1)),n("tbody",null,[d.value.length===0?(m(),u("tr",Dn,a[22]||(a[22]=[n("td",{colspan:"9",class:"text-center"},"Chưa có dữ liệu",-1)]))):J("",!0),(m(!0),u(b,null,f(d.value,(l,c)=>(m(),u("tr",{key:l.id},[n("td",null,o(c+1),1),n("td",null,o(l.maHuyen),1),n("td",null,o(l.maXa),1),n("td",null,o(l.tenXa),1),n("td",null,o(l.maSoThue),1),n("td",null,o(l.tenDonVi),1),n("td",null,o(l.loaiHinh),1),n("td",null,o(l.linhVucChanNuoi),1),n("td",Cn,o(l.hoanThanhDieuTra?"X":""),1)]))),128))])])])])])]))}},_n=G(xn,[["__scopeId","data-v-e546282a"]]);export{_n as default};
