import{_ as nn,r as T,c as en,i as ln,j as f,a as m,b as e,d as h,w as b,v as C,F as k,g as I,e as tn,t as s,f as an,o as r,h as on}from"./index-DO-IbZNU.js";const sn={class:"container-fluid"},un={class:"row"},hn={class:"ms-sm-auto px-4 pt-4"},dn={class:"card p-3 mb-4 shadow-sm"},cn={class:"d-flex flex-wrap align-items-center gap-2 mb-3"},mn=["disabled"],rn=["disabled"],vn=["disabled"],pn=["disabled"],Tn=["disabled"],bn=["disabled"],gn=["disabled"],fn=["disabled"],yn={class:"row g-3 align-items-end"},Hn={class:"col-md-2 col-sm-6"},Cn={class:"col-md-3 col-lg-2 col-sm-6"},kn=["value"],In={class:"col-md-3 col-lg-2 col-sm-6"},xn=["disabled"],wn=["value"],Mn={class:"col-md-3 col-lg-3 col-sm-6"},Vn={class:"table-responsive"},Nn={class:"table table-bordered table-hover caption-top"},Bn={class:"table-primary"},Ln={scope:"col",class:"text-center",style:{width:"50px"}},An=["checked"],Dn={key:0},$n={class:"text-center"},En=["value"],Pn={class:"text-center"},Xn={class:"text-center"},Sn={__name:"QuanLyTaiKhoan",setup(Kn){const u=T([]),o=T([]),t=T({nam:"2025",maTinh:"87",maHuyen:"870",hoTen:""}),x=T([{ma:"87",ten:"Đồng Tháp"},{ma:"88",ten:"Long An"},{ma:"89",ten:"An Giang"},{ma:"92",ten:"Cần Thơ"}]),d=T([]),v=en(()=>u.value.filter(a=>(t.value.nam===""||a.nam==t.value.nam)&&(t.value.maTinh===""||a.maTinh===t.value.maTinh)&&(t.value.maHuyen===""||a.maHuyen===t.value.maHuyen)&&(t.value.hoTen===""||a.hoTen.toLowerCase().includes(t.value.hoTen.toLowerCase())))),w=(a,n=100)=>new Promise(l=>setTimeout(()=>l(a),n));async function y(){if(t.value.maHuyen="",d.value=[],t.value.maTinh){const a=[{ma:"870",ten:"Hồng Ngự",ma_tinh:"87"},{ma:"871",ten:"Tam Nông",ma_tinh:"87"},{ma:"872",ten:"Tháp Mười",ma_tinh:"87"},{ma:"880",ten:"TP Tân An",ma_tinh:"88"},{ma:"881",ten:"Đức Huệ",ma_tinh:"88"},{ma:"890",ten:"TP Long Xuyên",ma_tinh:"89"},{ma:"891",ten:"Châu Đốc",ma_tinh:"89"}];d.value=await w(a.filter(n=>n.ma_tinh===t.value.maTinh)),t.value.maTinh==="87"&&d.value.some(n=>n.ma==="870")?t.value.maHuyen="870":d.value.length>0&&(t.value.maHuyen=d.value[0].ma)}}async function p(){console.log("Đang tạo dữ liệu mẫu cho danh sách điều tra viên với bộ lọc hiện tại:",t.value);const a=[],n=20,l=x.value.find(c=>c.ma===t.value.maTinh),i=d.value.find(c=>c.ma===t.value.maHuyen),g=l?l.ma:"87",H=i?i.ma:"870",F=i?i.ten:"Hồng Ngự",M=["PHẠM THANH ĐIỀN","VÕ THỊ BÉ","LÊ THỊ LAN","BÙI THỊ AN VUI","Trần Hữu Đức","Lê Văn Danh","Lê Huỳnh Hai","Nguyễn Thanh Tú","Nguyễn Văn Sua","Đỗ Ngọc An","Trần Thị Mỹ"],V=["Ấp Long Tía, Xã Long Khánh A, huyện Hồng Ngự, tỉnh Đồng Tháp","Ấp 2, Xã Thường Phước 1, huyện Hồng Ngự, tỉnh Đồng Tháp","Ấp Phú Lợi B, Xã Phú Thuận B, huyện Hồng Ngự, tỉnh Đồng Tháp","Khu Trưng 2, TT Thường Thới Tiền, huyện Hồng Ngự, tỉnh Đồng Tháp","Ấp Bình Hòa Hạ, Xã Thường Lạc","Ấp Bình Hòa Trung, Xã Thường Thới Hậu A","ấp Long Châu, Xã Long Khánh B","Ấp Long Thới B, Xã Long Thuận","Ấp Bình Hòa B, Xã Phú Thuận A","Ấp Bình Hòa Thượng, Xã Thường Thới Hậu A"];for(let c=0;c<n;c++){const N=M[c%M.length],q=`${H}${String(c+1).padStart(3,"0")}`,G=`0${Math.floor(Math.random()*9e8)+1e8}`,Q=V[c%V.length],R=Math.random()>.7?"Đã được đào tạo":"",Y=`IMEI${Math.floor(1e14+Math.random()*9e14)}`,z=Math.random()>.3,J=Math.random()>.1,O=t.value.nam===""||t.value.nam===String(t.value.nam),W=t.value.maTinh===""||t.value.maTinh===g,Z=t.value.maHuyen===""||t.value.maHuyen===H;t.value.hoTen===""||N.toLowerCase().includes(t.value.hoTen.toLowerCase()),O&&W&&Z&&a.push({id:`inv-${crypto.randomUUID()}`,nam:t.value.nam,maTinh:g,maHuyen:H,tenHuyen:F,maDTV:q,hoTen:N,soDienThoai:G,diaChi:Q,ghiChu:R,imei:Y,checkImei:z,trangThai:J})}u.value=await w(a)}function B(){console.log("Nút 'Tìm' được nhấn. Đang áp dụng bộ lọc và tái tạo dữ liệu."),p(),o.value=[]}function L(){alert('Chức năng "Thêm mới" (cần mở form nhập liệu)')}function A(){if(o.value.length===1){const a=o.value[0],n=u.value.find(l=>l.id===a);alert(`Chức năng "Sửa": Mở form chỉnh sửa cho ĐTV: ${n==null?void 0:n.hoTen} (Mã ĐTV: ${n==null?void 0:n.maDTV})`)}}function D(){if(o.value.length===0){alert("Vui lòng chọn ít nhất một điều tra viên để xóa.");return}const a=o.value.map(n=>{var l;return(l=u.value.find(i=>i.id===n))==null?void 0:l.hoTen}).filter(Boolean);confirm(`Bạn có chắc chắn muốn xóa các điều tra viên sau: ${a.join(", ")}?`)&&(u.value=u.value.filter(n=>!o.value.includes(n.id)),alert(`Đã xóa các điều tra viên: ${a.join(", ")}`),o.value=[])}function $(){if(o.value.length!==1){alert("Vui lòng chọn DUY NHẤT một điều tra viên để thay thế IMEI.");return}const a=o.value[0],n=u.value.find(l=>l.id===a);alert(`Chức năng "Thay thế IMEI" cho ĐTV: ${n==null?void 0:n.hoTen} (Mã ĐTV: ${n==null?void 0:n.maDTV})`)}function E(){if(o.value.length===0){alert("Vui lòng chọn ít nhất một điều tra viên.");return}const a=o.value.map(n=>{var l;return(l=u.value.find(i=>i.id===n))==null?void 0:l.hoTen}).filter(Boolean);alert(`Đã "Cho phép CAPI" cho: ${a.join(", ")}`)}function P(){if(o.value.length===0){alert("Vui lòng chọn ít nhất một điều tra viên.");return}const a=o.value.map(n=>{var l;return(l=u.value.find(i=>i.id===n))==null?void 0:l.hoTen}).filter(Boolean);alert(`Đã "Không cho phép CAPI" cho: ${a.join(", ")}`)}function X(){if(o.value.length===0){alert("Vui lòng chọn ít nhất một điều tra viên.");return}const a=o.value.map(n=>{var l;return(l=u.value.find(i=>i.id===n))==null?void 0:l.hoTen}).filter(Boolean);alert(`Đã "Kiểm tra IMEI" cho: ${a.join(", ")}`)}function S(){if(o.value.length===0){alert("Vui lòng chọn ít nhất một điều tra viên.");return}const a=o.value.map(n=>{var l;return(l=u.value.find(i=>i.id===n))==null?void 0:l.hoTen}).filter(Boolean);alert(`Đã "Không kiểm tra IMEI" cho: ${a.join(", ")}`)}function K(){if(o.value.length===0){alert("Vui lòng chọn ít nhất một điều tra viên để khôi phục mật khẩu.");return}const a=o.value.map(n=>{var l;return(l=u.value.find(i=>i.id===n))==null?void 0:l.hoTen}).filter(Boolean);confirm(`Bạn có chắc chắn muốn khôi phục mật khẩu cho các điều tra viên sau: ${a.join(", ")}?`)&&(alert(`Đã gửi yêu cầu khôi phục mật khẩu cho: ${a.join(", ")}`),o.value=[])}function j(){alert("Chức năng Xuất Excel (cần implement logic)")}function U(){alert('Chức năng "Thêm từ file Excel" (cần mở dialog chọn file và xử lý nhập liệu)')}function _(a){a.target.checked?o.value=v.value.map(n=>n.id):o.value=[]}return ln(async()=>{await y(),await p()}),f(()=>t.value.maTinh,async a=>{a?await y():(t.value.maHuyen="",d.value=[]),await p()}),f(()=>t.value.maHuyen,async a=>{await p()}),f(()=>t.value.nam,async a=>{await p()}),f(()=>t.value.hoTen,a=>{console.log("Giá trị tìm kiếm 'Họ tên' thay đổi:",a)}),(a,n)=>(r(),m("div",sn,[e("div",un,[e("main",hn,[n[36]||(n[36]=e("h2",{class:"text-center mb-4"},"Danh sách điều tra viên",-1)),e("div",dn,[e("div",cn,[e("button",{class:"btn btn-primary",onClick:L},n[5]||(n[5]=[e("i",{class:"bi bi-plus-circle"},null,-1),h(" Thêm mới ")])),e("button",{class:"btn btn-info text-dark",onClick:A,disabled:o.value.length!==1},n[6]||(n[6]=[e("i",{class:"bi bi-pencil-square"},null,-1),h(" Sửa ")]),8,mn),e("button",{class:"btn btn-danger",onClick:D,disabled:o.value.length===0},n[7]||(n[7]=[e("i",{class:"bi bi-trash"},null,-1),h(" Xóa ")]),8,rn),e("button",{class:"btn btn-secondary",onClick:$,disabled:o.value.length!==1},n[8]||(n[8]=[e("i",{class:"bi bi-phone"},null,-1),h(" Thay thế IMEI ")]),8,vn),e("button",{class:"btn btn-success",onClick:E,disabled:o.value.length===0},n[9]||(n[9]=[e("i",{class:"bi bi-check-circle"},null,-1),h(" Cho phép CAPI ")]),8,pn),e("button",{class:"btn btn-warning text-dark",onClick:P,disabled:o.value.length===0},n[10]||(n[10]=[e("i",{class:"bi bi-x-circle"},null,-1),h(" Không cho phép CAPI ")]),8,Tn),e("button",{class:"btn btn-primary",onClick:X,disabled:o.value.length===0},n[11]||(n[11]=[e("i",{class:"bi bi-phone-fill"},null,-1),h(" Kiểm tra IMEI ")]),8,bn),e("button",{class:"btn btn-secondary",onClick:S,disabled:o.value.length===0},n[12]||(n[12]=[e("i",{class:"bi bi-phone-slash-fill"},null,-1),h(" Không kiểm tra IMEI ")]),8,gn),e("button",{class:"btn btn-info",onClick:K,disabled:o.value.length===0},n[13]||(n[13]=[e("i",{class:"bi bi-key"},null,-1),h(" Khôi phục mật khẩu ")]),8,fn),e("button",{class:"btn btn-success ms-auto",onClick:j},n[14]||(n[14]=[e("i",{class:"bi bi-file-earmark-excel"},null,-1),h(" Xuất Excel ")])),e("button",{class:"btn btn-secondary",onClick:U},n[15]||(n[15]=[e("i",{class:"bi bi-upload"},null,-1),h(" Thêm từ file Excel ")]))]),e("div",yn,[e("div",Hn,[n[17]||(n[17]=e("label",{for:"nam",class:"form-label visually-hidden"},"Năm",-1)),b(e("select",{"onUpdate:modelValue":n[0]||(n[0]=l=>t.value.nam=l),class:"form-select",id:"nam"},n[16]||(n[16]=[e("option",{value:""},"--Chọn Năm--",-1),e("option",null,"2025",-1),e("option",null,"2024",-1),e("option",null,"2023",-1)]),512),[[C,t.value.nam]])]),e("div",Cn,[n[19]||(n[19]=e("label",{for:"tinhTp",class:"form-label visually-hidden"},"Tỉnh/TP",-1)),b(e("select",{"onUpdate:modelValue":n[1]||(n[1]=l=>t.value.maTinh=l),class:"form-select",id:"tinhTp",onChange:y},[n[18]||(n[18]=e("option",{value:""},"--Chọn Tỉnh--",-1)),(r(!0),m(k,null,I(x.value,l=>(r(),m("option",{key:l.ma,value:l.ma},s(l.ma)+" - "+s(l.ten),9,kn))),128))],544),[[C,t.value.maTinh]])]),e("div",In,[n[21]||(n[21]=e("label",{for:"quanHuyen",class:"form-label visually-hidden"},"Quận/Huyện",-1)),b(e("select",{"onUpdate:modelValue":n[2]||(n[2]=l=>t.value.maHuyen=l),class:"form-select",id:"quanHuyen",disabled:!d.value.length},[n[20]||(n[20]=e("option",{value:""},"--Chọn Huyện--",-1)),(r(!0),m(k,null,I(d.value,l=>(r(),m("option",{key:l.ma,value:l.ma},s(l.ma)+" - "+s(l.ten),9,wn))),128))],8,xn),[[C,t.value.maHuyen]])]),e("div",Mn,[n[22]||(n[22]=e("label",{for:"hoTen",class:"form-label visually-hidden"},"Họ tên",-1)),b(e("input",{type:"text","onUpdate:modelValue":n[3]||(n[3]=l=>t.value.hoTen=l),class:"form-control",id:"hoTen",placeholder:"Họ tên"},null,512),[[tn,t.value.hoTen]])]),e("div",{class:"col-md-auto"},[e("button",{class:"btn btn-primary",onClick:B},n[23]||(n[23]=[e("i",{class:"bi bi-search"},null,-1),h(" Tìm ")]))])])]),e("div",Vn,[e("table",Nn,[e("caption",null,"Tổng số bản ghi: "+s(v.value.length),1),e("thead",Bn,[e("tr",null,[e("th",Ln,[e("input",{type:"checkbox",onChange:_,checked:o.value.length===v.value.length&&v.value.length>0},null,40,An)]),n[24]||(n[24]=e("th",{scope:"col"},"STT",-1)),n[25]||(n[25]=e("th",{scope:"col"},"Mã Huyện",-1)),n[26]||(n[26]=e("th",{scope:"col"},"Tên Huyện",-1)),n[27]||(n[27]=e("th",{scope:"col"},"Mã ĐTV",-1)),n[28]||(n[28]=e("th",{scope:"col",style:{"min-width":"180px"}},"Họ tên",-1)),n[29]||(n[29]=e("th",{scope:"col",style:{"min-width":"120px"}},"Số điện thoại",-1)),n[30]||(n[30]=e("th",{scope:"col",style:{"min-width":"250px"}},"Địa chỉ",-1)),n[31]||(n[31]=e("th",{scope:"col",style:{"min-width":"150px"}},"Ghi chú",-1)),n[32]||(n[32]=e("th",{scope:"col",style:{"min-width":"150px"}},"IMEI",-1)),n[33]||(n[33]=e("th",{scope:"col"},"Check IMEI",-1)),n[34]||(n[34]=e("th",{scope:"col"},"Trạng thái",-1))])]),e("tbody",null,[v.value.length===0?(r(),m("tr",Dn,n[35]||(n[35]=[e("td",{colspan:"12",class:"text-center"},"Chưa có dữ liệu",-1)]))):an("",!0),(r(!0),m(k,null,I(v.value,(l,i)=>(r(),m("tr",{key:l.id},[e("td",$n,[b(e("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":n[4]||(n[4]=g=>o.value=g)},null,8,En),[[on,o.value]])]),e("td",null,s(i+1),1),e("td",null,s(l.maHuyen),1),e("td",null,s(l.tenHuyen),1),e("td",null,s(l.maDTV),1),e("td",null,s(l.hoTen),1),e("td",null,s(l.soDienThoai),1),e("td",null,s(l.diaChi),1),e("td",null,s(l.ghiChu),1),e("td",null,s(l.imei),1),e("td",Pn,s(l.checkImei?"X":""),1),e("td",Xn,s(l.trangThai?"X":""),1)]))),128))])])])])])]))}},Un=nn(Sn,[["__scopeId","data-v-47d12ed1"]]);export{Un as default};
