import{_ as R,r as h,c as N,i as z,j as y,a as s,b as n,w as r,v as c,F as g,g as b,d as x,t as o,f as J,o as i}from"./index-DO-IbZNU.js";const O={class:"container-fluid"},W={class:"row"},Y={class:"ms-sm-auto px-4 pt-4"},Z={class:"card p-3 mb-4 shadow-sm"},aa={class:"row g-3 align-items-end"},na={class:"col-md-2 col-sm-6"},ta={class:"col-md-2 col-sm-6"},ea={class:"col-md-3 col-lg-2 col-sm-6"},la=["value"],oa={class:"col-md-3 col-lg-2 col-sm-6"},sa=["disabled"],ia=["value"],ua={class:"col-md-3 col-lg-2 col-sm-6"},_a=["disabled"],ma=["value"],ha={class:"col-md-3 col-lg-2 col-sm-6"},ra=["disabled"],ca=["value"],da={class:"col-md-3 col-lg-2 col-sm-6"},va=["disabled"],ga=["value"],ba={class:"col-md-6 col-lg-4 d-flex align-items-end justify-content-end"},fa={class:"input-group flex-grow-1 me-2"},ya=["value"],pa={class:"table-responsive"},Ta={class:"table table-bordered table-hover caption-top"},xa={class:"text-center"},ka={class:"text-center"},Da={class:"text-center"},Ha={class:"text-center"},Ba={key:0},Ca={__name:"QuanLyKi",setup(Xa){const t=h({kyDieuTra:"4",nam:"2025",maTinh:"",maHuyen:"",maXa:"",maThon:"",maDiaBan:""}),k=h([{ma:"87",ten:"Đồng Tháp"},{ma:"88",ten:"Long An"},{ma:"89",ten:"An Giang"}]),d=h([]),m=h([]),_=h([]),u=h([]),D=h([]),w=N(()=>D.value.filter(l=>(!t.value.maTinh||l.ma_tinh===t.value.maTinh)&&(!t.value.maHuyen||l.ma_huyen===t.value.maHuyen)&&(!t.value.maXa||l.ma_xa===t.value.maXa)&&(!t.value.maThon||l.ma_thon===t.value.maThon)&&(!t.value.maDiaBan||l.dia_ban_ma===t.value.maDiaBan)).length),H=N(()=>{let l=D.value;return t.value.kyDieuTra&&(l=l.filter(a=>a.ky_dieu_tra===t.value.kyDieuTra)),t.value.nam&&(l=l.filter(a=>a.nam===t.value.nam)),t.value.maTinh&&(l=l.filter(a=>a.ma_tinh===t.value.maTinh)),t.value.maHuyen&&(l=l.filter(a=>a.ma_huyen===t.value.maHuyen)),t.value.maXa&&(l=l.filter(a=>a.ma_xa===t.value.maXa)),t.value.maThon&&(l=l.filter(a=>a.ma_thon===t.value.maThon)),t.value.maDiaBan&&(l=l.filter(a=>a.dia_ban_ma===t.value.maDiaBan)),l});function p(l,a){if(!l)return"";const e=[{key:`${a}_1_9`,label:"1-9"},{key:`${a}_10_29`,label:"10-29"},{key:`${a}_30_49`,label:"30-49"},{key:`${a}_50_199`,label:"50-199"},{key:`${a}_200_499`,label:"200-499"},{key:`${a}_500_plus`,label:">=500"}];for(const v of e)if(l[v.key])return v.label;return""}const f=(l,a=100)=>new Promise(e=>setTimeout(()=>e(l),a));async function M(){if(t.value.maHuyen="",t.value.maXa="",t.value.maThon="",t.value.maDiaBan="",d.value=[],m.value=[],_.value=[],u.value=[],t.value.maTinh){const a=await f([{ma:"870",ten:"Hồng Ngự",ma_tinh:"87"},{ma:"871",ten:"Tam Nông",ma_tinh:"87"},{ma:"880",ten:"TP Tân An",ma_tinh:"88"},{ma:"881",ten:"Thủ Thừa",ma_tinh:"88"},{ma:"890",ten:"TP Long Xuyên",ma_tinh:"89"},{ma:"891",ten:"Châu Đốc",ma_tinh:"89"}].filter(e=>e.ma_tinh===t.value.maTinh));d.value=a,d.value.length>0&&!t.value.maHuyen&&(t.value.maHuyen=d.value[0].ma,B())}}async function B(){if(t.value.maXa="",t.value.maThon="",t.value.maDiaBan="",m.value=[],_.value=[],u.value=[],t.value.maHuyen){const a=await f([{ma:"29980",ten:"Long Khánh A",ma_huyen:"870"},{ma:"29981",ten:"Long Khánh B",ma_huyen:"870"},{ma:"30000",ten:"Thị trấn Tràm Chim",ma_huyen:"871"},{ma:"30100",ten:"Phường 1",ma_huyen:"880"}].filter(e=>e.ma_huyen===t.value.maHuyen));m.value=a,m.value.length>0&&!t.value.maXa&&(t.value.maXa=m.value[0].ma,C())}}async function C(){if(t.value.maThon="",t.value.maDiaBan="",_.value=[],u.value=[],t.value.maXa){const a=await f([{ma:"05",ten:"Long Phước",ma_xa:"29980"},{ma:"06",ten:"Long Thạnh",ma_xa:"29980"},{ma:"01",ten:"Ấp An Hòa",ma_xa:"29981"},{ma:"02",ten:"Ấp An Long",ma_xa:"29981"},{ma:"03",ten:"Thôn Chợ Mới",ma_xa:"30000"}].filter(e=>e.ma_xa===t.value.maXa));_.value=a,_.value.length>0&&!t.value.maThon&&(t.value.maThon=_.value[0].ma,X())}}async function X(){if(t.value.maDiaBan="",u.value=[],t.value.maThon){const a=await f([{ma:"011-long hau 4",ten:"Địa bàn 011",ma_thon:"05"},{ma:"012-long hau 5",ten:"Địa bàn 012",ma_thon:"05"},{ma:"013-long thanh",ten:"Địa bàn 013",ma_thon:"06"},{ma:"001-an hoa",ten:"Địa bàn 001",ma_thon:"01"}].filter(e=>e.ma_thon===t.value.maThon));u.value=a,u.value.length>0&&!t.value.maDiaBan&&(t.value.maDiaBan=u.value[0].ma)}E()}async function E(){console.log("Đang lấy dữ liệu hộ với các bộ lọc:",t.value);const l=[{ky_dieu_tra:"4",nam:"2025",ma_tinh:"87",ma_huyen:"870",ma_xa:"29980",ma_thon:"05",dia_ban:"Địa bàn 011",dia_ban_ma:"011-long hau 4",stt_ho:"0001",ho_ten_chu_ho:"Nguyễn Thị Mèn",loi_thong_tin:{lon_1_9:!0,ga_10_29:!0,vit_1_9:!1,ngang_1_9:!1}},{ky_dieu_tra:"4",nam:"2025",ma_tinh:"87",ma_huyen:"870",ma_xa:"29980",ma_thon:"05",dia_ban:"Địa bàn 011",dia_ban_ma:"011-long hau 4",stt_ho:"0002",ho_ten_chu_ho:"Hồ Thị Nhảnh",loi_thong_tin:{lon_10_29:!0,ga_1_9:!0,vit_1_9:!1,ngang_1_9:!1}},{ky_dieu_tra:"4",nam:"2025",ma_tinh:"87",ma_huyen:"870",ma_xa:"29980",ma_thon:"05",dia_ban:"Địa bàn 011",dia_ban_ma:"011-long hau 4",stt_ho:"0003",ho_ten_chu_ho:"Trần Văn Thi",loi_thong_tin:{lon_1_9:!0,ga_1_9:!1,vit_10_29:!0,ngang_1_9:!1}},{ky_dieu_tra:"4",nam:"2025",ma_tinh:"87",ma_huyen:"870",ma_xa:"29980",ma_thon:"05",dia_ban:"Địa bàn 011",dia_ban_ma:"011-long hau 4",stt_ho:"0004",ho_ten_chu_ho:"Lê Văn An",loi_thong_tin:{lon_50_199:!0,ga_50_199:!1,vit_50_199:!1,ngang_50_199:!1}},{ky_dieu_tra:"4",nam:"2025",ma_tinh:"87",ma_huyen:"870",ma_xa:"29980",ma_thon:"05",dia_ban:"Địa bàn 011",dia_ban_ma:"011-long hau 4",stt_ho:"0005",ho_ten_chu_ho:"Phạm Thị Lan",loi_thong_tin:{lon_200_499:!0,ga_200_499:!1,vit_200_499:!1,ngang_200_499:!1}},{ky_dieu_tra:"4",nam:"2025",ma_tinh:"87",ma_huyen:"870",ma_xa:"29980",ma_thon:"05",dia_ban:"Địa bàn 012",dia_ban_ma:"012-long hau 5",stt_ho:"0001",ho_ten_chu_ho:"Võ Văn Long",loi_thong_tin:{lon_1_9:!0,ga_1_9:!0,vit_1_9:!0,ngang_1_9:!0}},{ky_dieu_tra:"4",nam:"2025",ma_tinh:"87",ma_huyen:"870",ma_xa:"29981",ma_thon:"01",dia_ban:"Địa bàn 001",dia_ban_ma:"001-an hoa",stt_ho:"0001",ho_ten_chu_ho:"Nguyễn Văn Cảnh",loi_thong_tin:{lon_1_9:!0,ga_10_29:!0,vit_1_9:!0,ngang_1_9:!0}},{ky_dieu_tra:"4",nam:"2025",ma_tinh:"88",ma_huyen:"880",ma_xa:"30100",ma_thon:"01",dia_ban:"Địa bàn 001",dia_ban_ma:"001-p1",stt_ho:"0001",ho_ten_chu_ho:"Phan Văn Minh",loi_thong_tin:{lon_1_9:!0,ga_1_9:!0,vit_1_9:!0,ngang_1_9:!0}},{ky_dieu_tra:"3",nam:"2024",ma_tinh:"87",ma_huyen:"870",ma_xa:"29980",ma_thon:"05",dia_ban:"Địa bàn 011",dia_ban_ma:"011-long hau 4",stt_ho:"0001",ho_ten_chu_ho:"Trần Văn Kỷ",loi_thong_tin:{lon_1_9:!0,ga_10_29:!0,vit_1_9:!1,ngang_1_9:!1}},{ky_dieu_tra:"4",nam:"2024",ma_tinh:"89",ma_huyen:"890",ma_xa:"30100",ma_thon:"01",dia_ban:"Địa bàn 001",dia_ban_ma:"001-lx",stt_ho:"0001",ho_ten_chu_ho:"Mai Thị Đào",loi_thong_tin:{lon_1_9:!0,ga_1_9:!0,vit_1_9:!0,ngang_1_9:!0}},...Array.from({length:30},(a,e)=>{const v=String(e+10).padStart(4,"0"),j=Math.random()<.7,q=Math.random()<.7,G=Math.random()<.7,Q=Math.random()<.7,T=(P,F)=>{const L=["1_9","10_29","30_49","50_199","200_499","500_plus"],$=F?L[Math.floor(Math.random()*L.length)]:null,V={};return L.forEach(I=>V[`${P}_${I}`]=!1),$&&(V[`${P}_${$}`]=!0),V};return{ky_dieu_tra:"4",nam:"2025",ma_tinh:"87",ma_huyen:"870",ma_xa:"29980",ma_thon:"05",dia_ban:"Địa bàn 011",dia_ban_ma:"011-long hau 4",stt_ho:v,ho_ten_chu_ho:`Chủ Hộ Random ${v}`,loi_thong_tin:{...T("lon",j),...T("ga",q),...T("vit",G),...T("ngang",Q)}}})];D.value=await f(l)}function A(){alert(`Tổng số hộ trong địa bàn/thôn hiện tại: ${w.value}. (Tính toán dựa trên dữ liệu hiển thị)`)}function S(){alert("Xuất Excel theo Địa bàn đã chọn. (Logic xuất Excel cần được implement)")}function K(){alert("Xuất Excel theo Huyện đã chọn. (Logic xuất Excel cần được implement)")}function U(){alert("Xuất Excel theo Tỉnh đã chọn. (Logic xuất Excel cần được implement)")}return z(()=>{t.value.maTinh=k.value.length>0?k.value[0].ma:""}),y(()=>t.value.maTinh,(l,a)=>{l!==a&&M()},{immediate:!0}),y(()=>t.value.maHuyen,(l,a)=>{l!==a&&B()}),y(()=>t.value.maXa,(l,a)=>{l!==a&&C()}),y(()=>t.value.maThon,(l,a)=>{l!==a&&X()}),y(()=>t.value.maDiaBan,()=>{E()}),(l,a)=>(i(),s("div",O,[n("div",W,[n("main",Y,[a[28]||(a[28]=n("h2",{class:"text-center mb-4"},"Bảng kê hộ quy mô nhỏ",-1)),n("div",Z,[n("div",aa,[n("div",na,[a[8]||(a[8]=n("label",{for:"kyDieuTra",class:"form-label"},"Kỳ điều tra",-1)),r(n("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.kyDieuTra=e),class:"form-select",id:"kyDieuTra"},a[7]||(a[7]=[n("option",{value:"4"},"4",-1),n("option",{value:"3"},"3",-1),n("option",{value:"2"},"2",-1),n("option",{value:"1"},"1",-1)]),512),[[c,t.value.kyDieuTra]])]),n("div",ta,[a[10]||(a[10]=n("label",{for:"nam",class:"form-label"},"Năm",-1)),r(n("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>t.value.nam=e),class:"form-select",id:"nam"},a[9]||(a[9]=[n("option",null,"2025",-1),n("option",null,"2024",-1),n("option",null,"2023",-1)]),512),[[c,t.value.nam]])]),n("div",ea,[a[12]||(a[12]=n("label",{for:"tinhTp",class:"form-label"},"Tỉnh/TP",-1)),r(n("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>t.value.maTinh=e),class:"form-select",id:"tinhTp",onChange:M},[a[11]||(a[11]=n("option",{value:""},"--Chọn Tỉnh--",-1)),(i(!0),s(g,null,b(k.value,e=>(i(),s("option",{key:e.ma,value:e.ma},o(e.ma)+" - "+o(e.ten),9,la))),128))],544),[[c,t.value.maTinh]])]),n("div",oa,[a[14]||(a[14]=n("label",{for:"quanHuyen",class:"form-label"},"Quận/Huyện",-1)),r(n("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>t.value.maHuyen=e),class:"form-select",id:"quanHuyen",onChange:B,disabled:!d.value.length},[a[13]||(a[13]=n("option",{value:""},"--Chọn Huyện--",-1)),(i(!0),s(g,null,b(d.value,e=>(i(),s("option",{key:e.ma,value:e.ma},o(e.ma)+" - "+o(e.ten),9,ia))),128))],40,sa),[[c,t.value.maHuyen]])]),n("div",ua,[a[16]||(a[16]=n("label",{for:"xaPhuong",class:"form-label"},"Xã/Phường",-1)),r(n("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>t.value.maXa=e),class:"form-select",id:"xaPhuong",onChange:C,disabled:!m.value.length},[a[15]||(a[15]=n("option",{value:""},"--Chọn Xã/Phường--",-1)),(i(!0),s(g,null,b(m.value,e=>(i(),s("option",{key:e.ma,value:e.ma},o(e.ma)+" - "+o(e.ten),9,ma))),128))],40,_a),[[c,t.value.maXa]])]),n("div",ha,[a[18]||(a[18]=n("label",{for:"thon",class:"form-label"},"Thôn",-1)),r(n("select",{"onUpdate:modelValue":a[5]||(a[5]=e=>t.value.maThon=e),class:"form-select",id:"thon",onChange:X,disabled:!_.value.length},[a[17]||(a[17]=n("option",{value:""},"--Chọn Thôn--",-1)),(i(!0),s(g,null,b(_.value,e=>(i(),s("option",{key:e.ma,value:e.ma},o(e.ma)+" - "+o(e.ten),9,ca))),128))],40,ra),[[c,t.value.maThon]])]),n("div",da,[a[20]||(a[20]=n("label",{for:"diaBan",class:"form-label"},"Địa bàn",-1)),r(n("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>t.value.maDiaBan=e),class:"form-select",id:"diaBan",disabled:!u.value.length},[a[19]||(a[19]=n("option",{value:""},"--Chọn Địa bàn--",-1)),(i(!0),s(g,null,b(u.value,e=>(i(),s("option",{key:e.ma,value:e.ma},o(e.ma)+" - "+o(e.ten),9,ga))),128))],8,va),[[c,t.value.maDiaBan]])]),n("div",ba,[n("div",fa,[a[21]||(a[21]=n("span",{class:"input-group-text"},"Tổng số hộ thôn/địa bàn:",-1)),n("input",{type:"text",class:"form-control",value:w.value,readonly:""},null,8,ya)]),n("button",{class:"btn btn-secondary flex-shrink-0",onClick:A},a[22]||(a[22]=[n("i",{class:"bi bi-arrow-clockwise"},null,-1),x(" Cập nhật ")]))])])]),n("div",{class:"d-flex justify-content-end mb-4 flex-wrap"},[n("button",{class:"btn btn-success me-2 mb-2",onClick:S},a[23]||(a[23]=[n("i",{class:"bi bi-file-earmark-excel"},null,-1),x(" Xuất Excel theo địa bàn ")])),n("button",{class:"btn btn-success me-2 mb-2",onClick:K},a[24]||(a[24]=[n("i",{class:"bi bi-file-earmark-excel"},null,-1),x(" Xuất Excel theo Huyện ")])),n("button",{class:"btn btn-success mb-2",onClick:U},a[25]||(a[25]=[n("i",{class:"bi bi-file-earmark-excel"},null,-1),x(" Xuất Excel theo Tỉnh ")]))]),n("div",pa,[n("table",Ta,[n("caption",null,"Tổng số hộ đang hiển thị: "+o(H.value.length),1),a[27]||(a[27]=n("thead",{class:"table-primary"},[n("tr",null,[n("th",{scope:"col"},"Mã Tỉnh"),n("th",{scope:"col"},"Mã Xã"),n("th",{scope:"col"},"Mã Thôn"),n("th",{scope:"col"},"Địa bàn"),n("th",{scope:"col"},"STT Hộ"),n("th",{scope:"col",style:{"min-width":"180px"}},"Họ và tên chủ hộ"),n("th",{scope:"col",class:"text-center"},"Lợn"),n("th",{scope:"col",class:"text-center"},"Gà"),n("th",{scope:"col",class:"text-center"},"Vịt"),n("th",{scope:"col",class:"text-center"},"Ngang")])],-1)),n("tbody",null,[(i(!0),s(g,null,b(H.value,(e,v)=>(i(),s("tr",{key:e.stt_ho+e.ma_dia_ban+e.ma_thon},[n("td",null,o(e.ma_tinh),1),n("td",null,o(e.ma_xa),1),n("td",null,o(e.ma_thon),1),n("td",null,o(e.dia_ban),1),n("td",null,o(e.stt_ho),1),n("td",null,o(e.ho_ten_chu_ho),1),n("td",xa,o(p(e.loi_thong_tin,"lon")),1),n("td",ka,o(p(e.loi_thong_tin,"ga")),1),n("td",Da,o(p(e.loi_thong_tin,"vit")),1),n("td",Ha,o(p(e.loi_thong_tin,"ngang")),1)]))),128)),H.value.length===0?(i(),s("tr",Ba,a[26]||(a[26]=[n("td",{colspan:"10",class:"text-center"},"Không tìm thấy dữ liệu hộ quy mô nhỏ nào.",-1)]))):J("",!0)])])])])])]))}},Va=R(Ca,[["__scopeId","data-v-937963c6"]]);export{Va as default};
