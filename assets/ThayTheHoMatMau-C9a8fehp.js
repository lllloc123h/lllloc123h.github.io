import{_ as C,r as h,c as D,i as x,j as g,a as s,b as a,k as _,w as d,v as r,F as c,g as v,d as P,t as l,f as w,o as u}from"./index-cKVi3yki.js";const B={class:"container-fluid"},N={class:"row"},A={class:"ms-sm-auto px-4 pt-4"},V={class:"card p-3 mb-4 shadow-sm"},K={class:"row g-3 align-items-end"},L={class:"col-md-2 col-sm-6"},U={class:"col-md-2 col-sm-6"},q={class:"col-md-3 col-lg-2 col-sm-6"},S=["value"],E={class:"col-md-3 col-lg-2 col-sm-6"},F=["disabled"],G=["value"],j={class:"col-md-3 col-lg-3 col-sm-6"},I=["disabled"],Q=["value"],R={class:"table-responsive"},z={class:"table table-bordered table-hover caption-top"},J={key:0},O={__name:"ThayTheHoMatMau",setup(W){const e=h({kyDieuTra:"4",nam:"2025",maTinh:"87",maHuyen:"870",maXa:"29971"}),X=h([{ma:"87",ten:"Đồng Tháp"},{ma:"88",ten:"Long An"},{ma:"89",ten:"An Giang"}]),m=h([]),i=h([]),f=h([]),T=D(()=>f.value.filter(n=>(e.value.kyDieuTra===""||n.kyDieuTra===e.value.kyDieuTra)&&(e.value.nam===""||n.nam===e.value.nam)&&(e.value.maTinh===""||n.maTinh===e.value.maTinh)&&(e.value.maHuyen===""||n.maHuyen===e.value.maHuyen)&&(e.value.maXa===""||n.maXa===e.value.maXa))),b=(o,n=100)=>new Promise(t=>setTimeout(()=>t(o),n));async function y(){if(e.value.maHuyen="",e.value.maXa="",m.value=[],i.value=[],e.value.maTinh){const o=[{ma:"870",ten:"Hồng Ngự",ma_tinh:"87"},{ma:"871",ten:"Tam Nông",ma_tinh:"87"},{ma:"880",ten:"TP Tân An",ma_tinh:"88"},{ma:"881",ten:"Thủ Thừa",ma_tinh:"88"},{ma:"890",ten:"TP Long Xuyên",ma_tinh:"89"},{ma:"891",ten:"Châu Đốc",ma_tinh:"89"}];m.value=await b(o.filter(n=>n.ma_tinh===e.value.maTinh)),m.value.length>0&&(e.value.maHuyen=m.value[0].ma)}}async function p(){if(e.value.maXa="",i.value=[],e.value.maHuyen){const o={870:[{ma:"29956",ten:"Xã Thường Phước 1"},{ma:"29962",ten:"Xã Thường Thới Hậu A"},{ma:"29967",ten:"Xã Thường Phước 2"},{ma:"29971",ten:"Thị trấn Thường Thới Tiền"},{ma:"29974",ten:"Xã Thường Lạc"},{ma:"29977",ten:"Xã Long Thuận"},{ma:"29980",ten:"Xã Long Khánh A"},{ma:"29983",ten:"Xã Long Khánh B"},{ma:"29992",ten:"Xã Phú Thuận B"},{ma:"29995",ten:"Xã Phú Thuận A"},{ma:"29998",ten:"Xã Phú Thuận"}],871:[{ma:"30000",ten:"Thị trấn Tràm Chim"},{ma:"30001",ten:"Xã Phú Cường"}]};i.value=await b(o[e.value.maHuyen]||[]),i.value.length>0&&(e.value.maXa=i.value[0].ma)}}async function H(){console.log("Đang lấy dữ liệu thay thế mẫu với bộ lọc:",e.value);const o=[{kyDieuTra:"4",nam:"2025",maTinh:"87",maHuyen:"870",maXa:"29971",maThon:"001",hoMatMau:{maHo:"HN001",tenChuHo:"Nguyễn Văn A",diaBan:"Khu phố 1"},hoThayMau:{maHo:"HN002",tenChuHo:"Trần Thị B",diaBan:"Khu phố 1"}},{kyDieuTra:"4",nam:"2025",maTinh:"87",maHuyen:"870",maXa:"29971",maThon:"002",hoMatMau:{maHo:"HN003",tenChuHo:"Lê Văn C",diaBan:"Khu phố 2"},hoThayMau:{maHo:"HN004",tenChuHo:"Phạm Thị D",diaBan:"Khu phố 2"}},{kyDieuTra:"4",nam:"2025",maTinh:"87",maHuyen:"870",maXa:"29962",maThon:"001",hoMatMau:{maHo:"HA001",tenChuHo:"Võ Văn E",diaBan:"Ấp Thới An"},hoThayMau:{maHo:"HA002",tenChuHo:"Đặng Thị G",diaBan:"Ấp Thới An"}},{kyDieuTra:"3",nam:"2024",maTinh:"88",maHuyen:"880",maXa:"30100",maThon:"001",hoMatMau:{maHo:"TAN001",tenChuHo:"Nguyễn Văn H",diaBan:"Phường 1"},hoThayMau:{maHo:"TAN002",tenChuHo:"Trần Thị K",diaBan:"Phường 1"}}];f.value=await b(o)}function k(){console.log("Áp dụng bộ lọc:",e.value)}return x(()=>{y().then(()=>{e.value.maHuyen?p().then(()=>{H()}):H()})}),g(()=>e.value.maTinh,(o,n)=>{o!==n&&y()}),g(()=>e.value.maHuyen,(o,n)=>{o!==n&&p()}),g([()=>e.value.kyDieuTra,()=>e.value.nam,()=>e.value.maTinh,()=>e.value.maHuyen,()=>e.value.maXa],()=>{H()}),(o,n)=>(u(),s("div",B,[a("div",N,[a("main",A,[n[18]||(n[18]=_('<h2 class="text-center mb-4" data-v-e9b544a3>Thay hộ biểu mẫu bị mất trong quá trình điều tra</h2><div class="d-flex flex-wrap gap-2 mb-3" data-v-e9b544a3><button class="btn btn-danger" data-v-e9b544a3><i class="bi bi-x-circle" data-v-e9b544a3></i> Xác nhận Hủy Mẫu </button><button class="btn btn-danger" data-v-e9b544a3><i class="bi bi-x-circle-fill" data-v-e9b544a3></i> Hủy Mẫu </button><button class="btn btn-primary" data-v-e9b544a3><i class="bi bi-pencil-square" data-v-e9b544a3></i> Thay mẫu điều tra </button><button class="btn btn-success" data-v-e9b544a3><i class="bi bi-check-circle" data-v-e9b544a3></i> Hủy Thay mẫu </button><button class="btn btn-info text-white" data-v-e9b544a3><i class="bi bi-file-earmark-excel" data-v-e9b544a3></i> Xuất Excel </button></div>',2)),a("div",V,[a("div",K,[a("div",L,[n[6]||(n[6]=a("label",{for:"kyDieuTra",class:"form-label visually-hidden"},"Kỳ điều tra",-1)),d(a("select",{"onUpdate:modelValue":n[0]||(n[0]=t=>e.value.kyDieuTra=t),class:"form-select",id:"kyDieuTra"},n[5]||(n[5]=[a("option",{value:"4"},"4",-1),a("option",{value:"3"},"3",-1),a("option",{value:"2"},"2",-1),a("option",{value:"1"},"1",-1)]),512),[[r,e.value.kyDieuTra]])]),a("div",U,[n[8]||(n[8]=a("label",{for:"nam",class:"form-label visually-hidden"},"Năm",-1)),d(a("select",{"onUpdate:modelValue":n[1]||(n[1]=t=>e.value.nam=t),class:"form-select",id:"nam"},n[7]||(n[7]=[a("option",null,"2025",-1),a("option",null,"2024",-1),a("option",null,"2023",-1)]),512),[[r,e.value.nam]])]),a("div",q,[n[10]||(n[10]=a("label",{for:"tinhTp",class:"form-label visually-hidden"},"Tỉnh/TP",-1)),d(a("select",{"onUpdate:modelValue":n[2]||(n[2]=t=>e.value.maTinh=t),class:"form-select",id:"tinhTp",onChange:y},[n[9]||(n[9]=a("option",{value:""},"--Chọn Tỉnh--",-1)),(u(!0),s(c,null,v(X.value,t=>(u(),s("option",{key:t.ma,value:t.ma},l(t.ma)+" - "+l(t.ten),9,S))),128))],544),[[r,e.value.maTinh]])]),a("div",E,[n[12]||(n[12]=a("label",{for:"quanHuyen",class:"form-label visually-hidden"},"Quận/Huyện",-1)),d(a("select",{"onUpdate:modelValue":n[3]||(n[3]=t=>e.value.maHuyen=t),class:"form-select",id:"quanHuyen",onChange:p,disabled:!m.value.length},[n[11]||(n[11]=a("option",{value:""},"--Chọn Huyện--",-1)),(u(!0),s(c,null,v(m.value,t=>(u(),s("option",{key:t.ma,value:t.ma},l(t.ma)+" - "+l(t.ten),9,G))),128))],40,F),[[r,e.value.maHuyen]])]),a("div",j,[n[14]||(n[14]=a("label",{for:"xaPhuong",class:"form-label visually-hidden"},"Xã/Phường",-1)),d(a("select",{"onUpdate:modelValue":n[4]||(n[4]=t=>e.value.maXa=t),class:"form-select",id:"xaPhuong",disabled:!i.value.length},[n[13]||(n[13]=a("option",{value:""},"--Chọn Xã/Phường--",-1)),(u(!0),s(c,null,v(i.value,t=>(u(),s("option",{key:t.ma,value:t.ma},l(t.ma)+" - "+l(t.ten),9,Q))),128))],8,I),[[r,e.value.maXa]])]),a("div",{class:"col-md-auto"},[a("button",{class:"btn btn-primary",onClick:k},n[15]||(n[15]=[a("i",{class:"bi bi-search"},null,-1),P(" Xem ")]))])])]),a("div",R,[a("table",z,[a("caption",null,"Tổng số bản ghi: "+l(T.value.length),1),n[17]||(n[17]=a("thead",{class:"table-primary"},[a("tr",null,[a("th",{rowspan:"2",scope:"col"},"STT"),a("th",{rowspan:"2",scope:"col"},"Mã Huyện"),a("th",{rowspan:"2",scope:"col"},"Mã Xã"),a("th",{rowspan:"2",scope:"col"},"Mã Thôn"),a("th",{colspan:"3",class:"text-center"},"Hộ mất mẫu"),a("th",{colspan:"3",class:"text-center"},"Hộ thay mẫu")]),a("tr",null,[a("th",{scope:"col",class:"text-center"},"Mã hộ"),a("th",{scope:"col",class:"text-center"},"Họ và tên chủ hộ"),a("th",{scope:"col",class:"text-center"},"Địa bàn"),a("th",{scope:"col",class:"text-center"},"Mã hộ"),a("th",{scope:"col",class:"text-center"},"Họ và tên chủ hộ"),a("th",{scope:"col",class:"text-center"},"Địa bàn")])],-1)),a("tbody",null,[T.value.length===0?(u(),s("tr",J,n[16]||(n[16]=[a("td",{colspan:"10",class:"text-center"},"Chưa có dữ liệu",-1)]))):w("",!0),(u(!0),s(c,null,v(T.value,(t,M)=>(u(),s("tr",{key:M},[a("td",null,l(M+1),1),a("td",null,l(t.maHuyen),1),a("td",null,l(t.maXa),1),a("td",null,l(t.maThon),1),a("td",null,l(t.hoMatMau.maHo),1),a("td",null,l(t.hoMatMau.tenChuHo),1),a("td",null,l(t.hoMatMau.diaBan),1),a("td",null,l(t.hoThayMau.maHo),1),a("td",null,l(t.hoThayMau.tenChuHo),1),a("td",null,l(t.hoThayMau.diaBan),1)]))),128))])])])])])]))}},Z=C(O,[["__scopeId","data-v-e9b544a3"]]);export{Z as default};
